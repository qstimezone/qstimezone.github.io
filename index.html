<script>
    const token = new URL(window.location.href).searchParams.get("key")

    if(!token) document.write(`<html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <meta content="Quantum Society Timezone" property="og:title">
    <meta content="This tool will help you easily get your timezone, and copy it to your clipboard.
    It&#39;s pretty cool, you just paste the timezone that it copies, and it&#39;ll work (hopefully lol)"
        property="og:description">
    <meta content="https://raw.githubusercontent.com/qstimezone/qstimezone.github.io/main/background.png"
        property="og:image">
    <link type="application/json+oembed"
        href="https://raw.githubusercontent.com/qstimezone/qstimezone.github.io/main/embed.json">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#00F6F4">
</head>

<body></body>

</html>

<style>
    body {
        margin: 0;
        background-color: black;
    }

    h1 {
        font-family: "Trebuchet MS", sans-serif;
        font-size: 8vw;
        color: white;
    }

    h2 {
        text-align: center;
        font-family: "Trebuchet MS", sans-serif;
        font-size: 4vw;
        color: rgb(200, 200, 200);
        padding-bottom: 270px;
    }

    h3 {
        text-align: center;
        font-family: "Trebuchet MS", sans-serif;
        font-size: 2vw;
        color: rgb(200, 200, 200);
        padding-top: 270px;
    }

    .bg {
        background-image: url(https://raw.githubusercontent.com/qstimezone/qstimezone.github.io/main/background.png);
        opacity: 50%;
        height: 100%;
        background-position-x: right;
        background-position-y: bottom;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .center {
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>

<div class="bg"></div>

<div class="center">
    <h3 id="copy">Loading...</h3>
</div>

<div class="center">
    <h2>Your timezone is</h2>
</div>

<div class="center">
    <h1 id="text">Loading...</h1>
</div>

<script>
    var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

    document.getElementById("text").innerHTML = timezone;
    document.getElementById("copy").innerHTML = "üìã Successfully copied timezone to clipboard!";

    navigator.clipboard.writeText(timezone).catch(() => document.getElementById("copy").innerHTML = "‚ùå There was an error copying your timezone to clipboard!");
</script>

</html>`)
    else if (!/^[a-zA-Z0-9]{64}$/.test(token)) window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
    else window.location.href = `https://tz.commandtechno.workers.dev?tz=${encodeURIComponent(Intl.DateTimeFormat().resolvedOptions().timeZone)}&token=${token}`
</script>
